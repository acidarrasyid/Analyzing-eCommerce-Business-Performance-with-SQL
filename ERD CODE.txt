--create customers_dataset table
create table customers_dataset (
customer_id varchar,
customer_unique_id varchar,
customer_zip_code_prefix int,
customer_city varchar,
customer_state varchar
);

--create geolocation_dataset table
create table geolocations_dataset (
geolocation_zip_code_prefix varchar,
geolocation_lat varchar,
geolocation_lng varchar,
geolocation_city varchar,
geolocation_state varchar
);

--create orders_dataset table
create table orders_dataset (
order_id varchar,
customer_id varchar,
order_status varchar,
order_purchase_timestamp timestamp without time zone,
order_approved_at timestamp without time zone,
order_delivered_carrier_date timestamp without time zone,
order_delivered_customer_date timestamp without time zone,
order_estimated_delivery_date timestamp without time zone
);

--create product_dataset table
create table product_dataset (
index int,
product_id varchar,
product_category_name varchar,
product_name_lenght float8,
product_description_lenght float8,
product_photos_qty float8,
product_weight_g float8,
product_length_cm float8,
product_height_cm float8,
product_width_cm float8
);

--create sellers_dataset table
create table sellers_dataset (
seller_id varchar,
seller_zip_code_prefix int,
seller_city varchar,
seller_state varchar
);

--create order_items_dataset table
create table order_items_dataset (
order_id varchar,
order_item_id varchar,
product_id varchar,
seller_id varchar,
shipping_limit_date timestamp without time zone,
price float8,
freight_value float8
);

--create order_payments_dataset table
create table order_payments_dataset (
order_id varchar,
payment_sequential varchar,
payment_type varchar,
payment_installments varchar,
payment_value float8
);

--create order_reviews_dataset table
create table order_reviews_dataset (
review_id varchar,
order_id varchar,
review_score varchar,
review_comment_title varchar,
review_comment_message varchar,
review_creation_date timestamp without time zone,
review_answer_timestamp timestamp without time zone
);

--alter table PK & FK
alter table customers_dataset
add primary key (customer_id);
alter table orders_dataset
add foreign key (customer_id)
references customers_dataset;
alter table orders_dataset
add primary key (order_id);
alter table order_items_dataset
add foreign key (order_id)
references orders_dataset;
alter table order_payments_dataset
add foreign key (order_id)
references orders_dataset;
alter table order_reviews_dataset
add foreign key (order_id)
references orders_dataset;
alter table sellers_dataset
add primary key (seller_id);
alter table order_items_dataset
add foreign key (seller_id)
references sellers_dataset;
alter table product_dataset
add primary key (product_id);
alter table order_items_dataset
add foreign key (product_id)
references product_dataset;